// ═══════════════════════════════════════════════════════════════════════════════
// RUST BUCKET RISING - Card Data
// ═══════════════════════════════════════════════════════════════════════════════

import type { StarterCard, ActionCard, HazardCard } from '@/types';

// ─────────────────────────────────────────────────────────────────────────────
// Starting Cards (10 total per player)
// ─────────────────────────────────────────────────────────────────────────────

export const STARTING_CARDS: StarterCard[] = [
  {
    id: 'supply-check',
    title: 'Supply Check',
    type: 'starter',
    effect: '+1 Credit',
    effectData: { credits: 1 },
    copies: 6,
    flavor: 'Found some spare change in the couch cushions.',
  },
  {
    id: 'cheap-battery',
    title: 'Cheap Battery',
    type: 'starter',
    effect: '+1⚡ (choose system)',
    effectData: { powerChoice: 1 },
    copies: 3,
    flavor: 'Every spark counts in this rust bucket.',
  },
  {
    id: 'basic-engines',
    title: 'Basic Engines',
    type: 'starter',
    effect: '+2⚡ Engines',
    effectData: { power: { engines: 2 } },
    copies: 1,
    flavor: "Nothing a little space tape can't fix!",
  },
];

// ─────────────────────────────────────────────────────────────────────────────
// Tier 1 Cards (Station 1 - Core Cards)
// ─────────────────────────────────────────────────────────────────────────────

export const TIER_1_CARDS: ActionCard[] = [
  {
    id: 'weapons-core',
    title: 'Weapons Core',
    type: 'action',
    tier: 1,
    cost: 3,
    installCost: 2,
    system: 'weapons',
    effect: '+2⚡ Weapons',
    effectData: { power: { weapons: 2 } },
    installEffect: 'Give hazard: target discards 1',
    installData: { onGiveHazard: { targetDiscard: 1 } },
    copies: 4,
    flavor: '"It might be cobbled together, but it still makes things explode."',
  },
  {
    id: 'engine-boosters',
    title: 'Engine Boosters',
    type: 'action',
    tier: 1,
    cost: 3,
    installCost: 2,
    system: 'engines',
    effect: '+2⚡ Engines',
    effectData: { power: { engines: 2 } },
    installEffect: '+1 Move',
    installData: { moves: 1 },
    copies: 4,
    flavor: "We rerouted power through the snack machine. It's faster now.",
  },
  {
    id: 'computational-node',
    title: 'Computational Node',
    type: 'action',
    tier: 1,
    cost: 3,
    installCost: 2,
    system: 'computers',
    effect: '+2⚡ Computers',
    effectData: { power: { computers: 2 } },
    installEffect: '+1 Card',
    installData: { draw: 1 },
    copies: 4,
    flavor: "She's held together by duct tape and bad code—but she runs.",
  },
  {
    id: 'cargo-relay',
    title: 'Cargo Relay',
    type: 'action',
    tier: 1,
    cost: 3,
    installCost: 2,
    system: 'logistics',
    effect: '+2⚡ Logistics',
    effectData: { power: { logistics: 2 } },
    installEffect: '+1⚡ (any)',
    installData: { powerChoice: 1 },
    copies: 4,
    flavor: '"You move it, you own it. You sell it, you survive."',
  },
  {
    id: 'expensive-countermeasures',
    title: 'Expensive Countermeasures',
    type: 'action',
    tier: 1,
    cost: 3,
    installCost: 2,
    system: 'weapons',
    effect: '+1⚡ Weapons, block hazard',
    effectData: { power: { weapons: 1 } },
    reaction: { trigger: 'onReceiveHazard', effect: 'blockHazard', bonus: { draw: 1 } },
    installEffect: 'Block hazard: +1 Card',
    installData: { power: { weapons: 1 } },
    copies: 4,
    flavor: '"Expensive? Yes. Worth it? Ask the guy who didn\'t buy them."',
  },
];

// ─────────────────────────────────────────────────────────────────────────────
// Tier 2 Cards (Station 3)
// ─────────────────────────────────────────────────────────────────────────────

export const TIER_2_CARDS: ActionCard[] = [
  // Engines
  {
    id: 'afterburner-surge',
    title: 'Afterburner Surge',
    type: 'action',
    tier: 2,
    cost: 4,
    installCost: 2,
    system: 'engines',
    effect: '+3⚡ Engines',
    effectData: { power: { engines: 3 } },
    installEffect: '+2⚡ Engines',
    installData: { power: { engines: 2 } },
    copies: 1,
  },
  {
    id: 'tactical-vectoring',
    title: 'Tactical Vectoring',
    type: 'action',
    tier: 2,
    cost: 3,
    installCost: 2,
    system: 'engines',
    effect: '+2 Move, +1⚡',
    effectData: { moves: 2, powerChoice: 1 },
    installEffect: '+1 Move',
    installData: { moves: 1 },
    copies: 1,
  },
  {
    id: 'impulse-boosters',
    title: 'Impulse Boosters',
    type: 'action',
    tier: 2,
    cost: 3,
    installCost: 2,
    system: 'engines',
    effect: '+2⚡, +1 Move',
    effectData: { powerChoice: 2, moves: 1 },
    installEffect: '+1⚡',
    installData: { powerChoice: 1 },
    copies: 1,
  },
  {
    id: 'thruster-array',
    title: 'Thruster Array',
    type: 'action',
    tier: 2,
    cost: 4,
    installCost: 3,
    system: 'engines',
    effect: '+1 Move, +2⚡',
    effectData: { moves: 1, powerChoice: 2 },
    installEffect: '+1 Move, +1⚡',
    installData: { moves: 1, powerChoice: 1 },
    copies: 1,
  },
  {
    id: 'interceptor-mode',
    title: 'Interceptor Mode',
    type: 'action',
    tier: 2,
    cost: 5,
    installCost: 3,
    system: 'engines',
    effect: '+1 Move, +2⚡ Weapons',
    effectData: { moves: 1, power: { weapons: 2 } },
    installEffect: '+1 Move, +1⚡ Weapons',
    installData: { moves: 1, power: { weapons: 1 } },
    copies: 1,
  },
  // Logistics
  {
    id: 'efficient-routing',
    title: 'Efficient Routing',
    type: 'action',
    tier: 2,
    cost: 3,
    installCost: 2,
    system: 'logistics',
    effect: '+2 Credits, may trash a card',
    effectData: { credits: 2, mayTrash: 1 },
    installEffect: '+1 credit or trash 1',
    installData: { credits: 1 },
    copies: 1,
  },
  {
    id: 'credit-surge',
    title: 'Credit Surge',
    type: 'action',
    tier: 2,
    cost: 4,
    installCost: 3,
    system: 'logistics',
    effect: '+3 Credits',
    effectData: { credits: 3 },
    installEffect: '+2 Credits',
    installData: { credits: 2 },
    copies: 1,
  },
  {
    id: 'cargo-jettison',
    title: 'Cargo Jettison',
    type: 'action',
    tier: 2,
    cost: 3,
    installCost: 2,
    system: 'logistics',
    effect: 'Trash a card, +2⚡',
    effectData: { mustTrash: 1, powerChoice: 2 },
    installEffect: 'If trash: +1⚡',
    installData: { conditionalPower: { trigger: 'onTrash', amount: 1 } },
    copies: 1,
  },
  {
    id: 'market-insider',
    title: 'Market Insider',
    type: 'action',
    tier: 2,
    cost: 4,
    installCost: 2,
    system: 'logistics',
    effect: '+2 Credits, next buy -1',
    effectData: { credits: 2, buyDiscount: 1 },
    installEffect: 'First buy -1',
    installData: { buyDiscount: 1 },
    copies: 1,
  },
  {
    id: 'refit-contract',
    title: 'Refit Contract',
    type: 'action',
    tier: 2,
    cost: 5,
    installCost: 3,
    system: 'logistics',
    effect: '+3 Credits',
    effectData: { credits: 3 },
    installEffect: '+1 Credit per turn',
    installData: { credits: 1 },
    copies: 1,
  },
  // Weapons
  {
    id: 'pulse-grenade',
    title: 'Pulse Grenade',
    type: 'action',
    tier: 2,
    cost: 4,
    installCost: 2,
    system: 'weapons',
    effect: 'Hazard to all at location, +2⚡',
    effectData: { hazardAllAtLocation: true, powerChoice: 2 },
    installEffect: 'Give hazard at location',
    installData: { giveHazard: true },
    copies: 1,
  },
  {
    id: 'mag-leash',
    title: 'Mag-Leash',
    type: 'action',
    tier: 2,
    cost: 3,
    installCost: 2,
    system: 'weapons',
    effect: 'Move player 1 space, give hazard',
    effectData: { moveOther: 1, giveHazard: true },
    installEffect: 'If give hazard: +1 move',
    installData: { conditionalPower: { trigger: 'onGiveHazard', amount: 1 } },
    copies: 1,
  },
  {
    id: 'overload-conduit',
    title: 'Overload Conduit',
    type: 'action',
    tier: 2,
    cost: 5,
    installCost: 3,
    system: 'weapons',
    effect: '+3⚡, may give hazard anywhere',
    effectData: { powerChoice: 3, giveHazardAnywhere: true },
    installEffect: '+2⚡',
    installData: { powerChoice: 2 },
    copies: 1,
  },
  {
    id: 'scrap-shot',
    title: 'Scrap Shot',
    type: 'action',
    tier: 2,
    cost: 3,
    installCost: 2,
    system: 'weapons',
    effect: 'Give hazard. +1⚡ if they had one',
    effectData: { giveHazard: true, bonusIfHadHazard: { power: 1 } },
    installEffect: 'If give hazard: +1⚡',
    installData: { conditionalPower: { trigger: 'onGiveHazard', amount: 1 } },
    copies: 1,
  },
  {
    id: 'energy-recoil',
    title: 'Energy Recoil',
    type: 'action',
    tier: 2,
    cost: 3,
    installCost: 2,
    system: 'weapons',
    effect: '+2⚡, give hazard',
    effectData: { powerChoice: 2, giveHazard: true },
    installEffect: '+1⚡. If give hazard: +1 credit',
    installData: { powerChoice: 1, conditionalCredits: { trigger: 'onGiveHazard', amount: 1 } },
    copies: 1,
  },
  // Computers
  {
    id: 'nav-prediction',
    title: 'Nav Prediction',
    type: 'action',
    tier: 2,
    cost: 4,
    installCost: 2,
    system: 'computers',
    effect: '+1 Card, +1 Move, +1⚡',
    effectData: { draw: 1, moves: 1, powerChoice: 1 },
    installEffect: '+1 Card',
    installData: { draw: 1 },
    copies: 1,
  },
  {
    id: 'cyber-reflex',
    title: 'Cyber Reflex',
    type: 'action',
    tier: 2,
    cost: 3,
    installCost: 2,
    system: 'computers',
    effect: '+2 Cards',
    effectData: { draw: 2 },
    installEffect: '+1 Card',
    installData: { draw: 1 },
    copies: 1,
  },
  {
    id: 'feedback-surge',
    title: 'Feedback Surge',
    type: 'action',
    tier: 2,
    cost: 3,
    installCost: 2,
    system: 'computers',
    effect: '+3⚡',
    effectData: { powerChoice: 3 },
    installEffect: '+2⚡',
    installData: { powerChoice: 2 },
    copies: 1,
  },
  {
    id: 'synced-loop',
    title: 'Synced Loop',
    type: 'action',
    tier: 2,
    cost: 5,
    installCost: 3,
    system: 'computers',
    effect: '+2⚡, +1⚡ per installation',
    effectData: { powerChoice: 2, powerPerInstallation: 1 },
    installEffect: '+1 Card per turn',
    installData: { draw: 1 },
    copies: 1,
  },
  {
    id: 'remote-uplink',
    title: 'Remote Uplink',
    type: 'action',
    tier: 2,
    cost: 4,
    installCost: 2,
    system: 'computers',
    effect: '+1⚡, +1 Move',
    effectData: { powerChoice: 1, moves: 1 },
    installEffect: '+1⚡',
    installData: { powerChoice: 1 },
    copies: 1,
  },
];

// ─────────────────────────────────────────────────────────────────────────────
// Tier 3 Cards (Station 5)
// ─────────────────────────────────────────────────────────────────────────────

export const TIER_3_CARDS: ActionCard[] = [
  // Weapons
  {
    id: 'chain-reaction',
    title: 'Chain Reaction',
    type: 'action',
    tier: 3,
    cost: 6,
    installCost: 4,
    system: 'weapons',
    effect: 'Hazard to all players, +1⚡ per',
    effectData: { hazardAll: true, powerPerHazard: 1 },
    installEffect: 'Give hazard. +2⚡ if had one',
    installData: { giveHazard: true, bonusIfHadHazard: { power: 2 } },
    copies: 1,
  },
  {
    id: 'detonator-relay',
    title: 'Detonator Relay',
    type: 'action',
    tier: 3,
    cost: 7,
    installCost: 4,
    system: 'weapons',
    effect: 'Once/game: Hazard all, mission -2⚡',
    effectData: { oneTimeUse: true, hazardAll: true, missionDiscount: 2 },
    installEffect: 'If give hazard: mission -1⚡',
    installData: { conditionalPower: { trigger: 'onGiveHazard', amount: 1 } },
    copies: 1,
  },
  {
    id: 'scorch-protocol',
    title: 'Scorch Protocol',
    type: 'action',
    tier: 3,
    cost: 5,
    installCost: 4,
    system: 'weapons',
    effect: '+4⚡. +1 Fame if 3+ hazards in deck',
    effectData: { powerChoice: 4, fameIfHazards: { count: 3, fame: 1 } },
    installEffect: '+2⚡. Draw hazard: +1 card',
    installData: { powerChoice: 2 },
    copies: 1,
  },
  // Computers
  {
    id: 'quantum-core',
    title: 'Quantum Core',
    type: 'action',
    tier: 3,
    cost: 6,
    installCost: 4,
    system: 'computers',
    effect: '+3⚡, +2 Cards',
    effectData: { powerChoice: 3, draw: 2 },
    installEffect: '+1⚡, +1 Card',
    installData: { powerChoice: 1, draw: 1 },
    copies: 1,
  },
  {
    id: 'echo-engine',
    title: 'Echo Engine',
    type: 'action',
    tier: 3,
    cost: 7,
    installCost: 4,
    system: 'computers',
    effect: 'Play top card of discard',
    effectData: { playFromDiscard: true },
    installEffect: 'May play top of discard',
    installData: { mayPlayFromDiscard: true },
    copies: 1,
  },
  {
    id: 'temporal-jump',
    title: 'Temporal Jump',
    type: 'action',
    tier: 3,
    cost: 6,
    installCost: 5,
    system: 'computers',
    effect: 'Once/game: Extra turn',
    effectData: { oneTimeUse: true, extraTurn: true },
    installEffect: 'Complete mission: +1⚡',
    installData: { conditionalPower: { trigger: 'onMissionComplete', amount: 1 } },
    copies: 1,
  },
  // Engines
  {
    id: 'phase-skip-drive',
    title: 'Phase Skip Drive',
    type: 'action',
    tier: 3,
    cost: 7,
    installCost: 5,
    system: 'engines',
    effect: '+3 Move, mission -2⚡',
    effectData: { moves: 3, missionDiscount: 2 },
    installEffect: '+1 Move. 2+ moves: +1⚡',
    installData: { moves: 1, conditionalPower: { trigger: 'onMove2Plus', amount: 1 } },
    copies: 1,
  },
  {
    id: 'singularity-drive',
    title: 'Singularity Drive',
    type: 'action',
    tier: 3,
    cost: 6,
    installCost: 4,
    system: 'engines',
    effect: '+4⚡, +1 Move',
    effectData: { powerChoice: 4, moves: 1 },
    installEffect: '+2⚡',
    installData: { powerChoice: 2 },
    copies: 1,
  },
  // Logistics
  {
    id: 'trade-nexus',
    title: 'Trade Nexus',
    type: 'action',
    tier: 3,
    cost: 7,
    installCost: 5,
    system: 'logistics',
    effect: '+4 Credits, install at -2',
    effectData: { credits: 4, installDiscount: 2 },
    installEffect: '+2 credits, next install -1',
    installData: { credits: 2, installDiscount: 1 },
    copies: 1,
  },
];

// ─────────────────────────────────────────────────────────────────────────────
// Hazard Cards
// ─────────────────────────────────────────────────────────────────────────────

export const HAZARD_CARDS: HazardCard[] = [
  {
    id: 'scrambled-controls',
    title: 'Scrambled Controls',
    type: 'hazard',
    effect: 'System abilities cost +1⚡',
    clearCondition: 'Discard 2 cards',
    clearCost: { discard: 2 },
    copies: 3,
  },
  {
    id: 'thruster-jam',
    title: 'Thruster Jam',
    type: 'hazard',
    effect: "Can't move more than 1 space",
    clearCondition: 'Spend all Engines ⚡ (min 2)',
    clearCost: { spendAll: 'engines', min: 2 },
    copies: 3,
  },
  {
    id: 'corrupted-nav-chip',
    title: 'Corrupted Nav Chip',
    type: 'hazard',
    effect: "Can't complete missions",
    clearCondition: '2⚡ from Computers',
    clearCost: { power: { computers: 2 } },
    copies: 3,
  },
  {
    id: 'warrant-issued',
    title: 'Warrant Issued',
    type: 'hazard',
    effect: 'Missions cost +2 Credits',
    clearCondition: '2 Credits + 1⚡ Logistics',
    clearCost: { credits: 2, power: { logistics: 1 } },
    copies: 3,
  },
  {
    id: 'static-overload',
    title: 'Static Overload',
    type: 'hazard',
    effect: 'Lose 1⚡ from a system',
    clearCondition: '2⚡ from Computers',
    clearCost: { power: { computers: 2 } },
    copies: 3,
  },
  {
    id: 'rogue-ai-fragment',
    title: 'Rogue AI Fragment',
    type: 'hazard',
    effect: "Can't install cards",
    clearCondition: '1⚡ Computers + 1 Credit',
    clearCost: { power: { computers: 1 }, credits: 1 },
    passOnClear: true,
    copies: 1,
  },
  {
    id: 'smuggled-parasite',
    title: 'Smuggled Parasite',
    type: 'hazard',
    effect: 'Reveal when drawn',
    clearCondition: 'Discard 1 + 1⚡ Logistics',
    clearCost: { discard: 1, power: { logistics: 1 } },
    revealOnDraw: true,
    passOnClear: true,
    copies: 1,
  },
  {
    id: 'failsafe-lockdown',
    title: 'Failsafe Lockdown',
    type: 'hazard',
    effect: 'Max 2 cards this turn',
    clearCondition: '1⚡ from 2 different systems',
    clearCost: { powerFromDifferent: 2 },
    copies: 1,
  },
  {
    id: 'overloaded-circuits',
    title: 'Overloaded Circuits',
    type: 'hazard',
    effect: 'Max +2⚡ from cards this turn',
    clearCondition: '1⚡ from 2 different systems',
    clearCost: { powerFromDifferent: 2 },
    copies: 1,
  },
  {
    id: 'corrosive-spores',
    title: 'Corrosive Spores',
    type: 'hazard',
    effect: "Can't install cards",
    clearCondition: '2⚡ Logistics',
    clearCost: { power: { logistics: 2 } },
    passOnClear: true,
    copies: 1,
  },
];

// ─────────────────────────────────────────────────────────────────────────────
// Export All Cards
// ─────────────────────────────────────────────────────────────────────────────

export const ALL_ACTION_CARDS = [...TIER_1_CARDS, ...TIER_2_CARDS, ...TIER_3_CARDS];

export const getCardById = (id: string) => {
  return [...STARTING_CARDS, ...ALL_ACTION_CARDS, ...HAZARD_CARDS].find(c => c.id === id);
};

export const getCardsByTier = (tier: 1 | 2 | 3): ActionCard[] => {
  switch (tier) {
    case 1: return TIER_1_CARDS;
    case 2: return TIER_2_CARDS;
    case 3: return TIER_3_CARDS;
  }
};
